import 'bootstrap/dist/css/bootstrap.css';

import { Appear, Image } from 'mdx-deck';
import List from './components/List.jsx';
import { CodeSurfer } from "mdx-deck-code-surfer";
import { LiveCode } from 'mdx-deck-live-code';
import nightOwl from "prism-react-renderer/themes/nightOwl";
import { SplitRight } from 'mdx-deck/layouts';

export { default as theme } from './theme.js';

export default SplitRight

![](https://upload.wikimedia.org/wikipedia/commons/a/a7/React-icon.svg)

# Mini Curso de React

[https://react-imd-2019.now.sh](https://react-imd-2019.now.sh)

```notes
Notas vis√≠veis apenas para mim

T√≥picos
  - Sobre mim
  - Logique
  - Plataforma LoP
```

---

# Quem somos n√≥s? ‚úã

```notes
- C&T.
- Android/React Arduino Day, NodeJS e Programa√ß√£o Web na ECT
- Programa√ß√£o, cultura japonesa, fotografia, mais recentemente criptomoedas
- Jap√£o estudando educa√ß√£o (programa√ß√£o para iniciantes, games como motiva√ß√£o)
- Bolsista no projeto do BR-PlantExpert
- Plataforma LoP
- Logique Sistemas
- Agradecimentos
- React Community
```

```notes
- IMD.
- Nanodegree de React na udacity
- Atualmente estagi√°rio na dataprev
- Passei recentemente em processo seletivo da Codeminer

```

---

<List title="Um pouco sobre voc√™s"
  items={[
    'B√°sico de HTML, CSS, JavaScript?',
    'J√° trabalha ou faz est√°gio na √°rea?',
    'Backend vs Frontend?',
    'Fullstack Developer?',
    'J√° usou React?',
    'J√° usou alguma outra framework Frontend? (Angular, Vue, etc...)'
  ]} 
/>

---

<List title="O que voc√™ ir√° aprender nesse mini curso:"
  items={[
    'Um pouco sobre aplica√ß√µes web',
    'O que √© React e o porqu√™ de utilizar',
    'Quais os requisitos necess√°rios para aprender React',
    'Principais conceitos do React (JSX, Componentes, Props, State)',
    'Entendendo a estrutura de um projeto React',
    'Escrever seu primeiro aplicativo usando React',
    'Desafio'
  ]} 
/>

---

## Todos os c√≥digos s√£o copi√°veis üëå

---

### Um pouco sobre aplica√ß√µes web

---

### Renderizando no servidor

<img src={require("file-loader!./imgs/arq-1.png")} style={{ marginBottom: 16 }}/>

#### Rails, Java (JPA & JSP), PHP, Python (Django)

---

### Renderizando no servidor + AJAX

<img src={require("file-loader!./imgs/arq-2.png")} />

---

### SPA - Single Page Applications

<img src={require("file-loader!./imgs/arq-3.png")} />

```notes
Pra que seja poss√≠vel criar aplica√ß√µes utilizando JavaScript foram desenvolvidas v√°rias frameworks
```

---

### O que √© React e o porqu√™ de utilizar

---

# React

<Appear>
  <p>Uma biblioteca Javascript para construir interfaces de usu√°rio</p>
  <img src={require("file-loader!./imgs/react-definition.png")} />
</Appear>

---

<List title="Ainda segundo o facebook"
  items={[
    'Declarativo (vs Imperativo)',
    'Baseado em componentes',
    'Learn Once, Write Anywhere'
  ]} 
/>

```notes
Aprenda uma √∫nica vez, escreva onde quer que seja
```

---

<List title="React √© como uma interface Java"
  items={[
    'ReactDOM',
    'ReactNative',
    'mdx-deck',
    'Framer',
    'ReactPDF',
    'ReactWord',
    'ReactVR',
    'Netflix React para TV'
  ]} 
/>

---

<List title="Possui um ecossistema enorme"
  items={[
    'Comunidade',
    'Bibliotecas',
    'D√∫vidas'
  ]} 
/>

---

### Frameworks mais utilizadas - 2019

<img src={require("file-loader!./imgs/web-frameworks-2019.png")} />

---

export default SplitRight

<img src={require("file-loader!./imgs/most-dreaded-frameworks-2019.png")} />

<img src={require("file-loader!./imgs/most-loved-frameworks-2019.png")} />

---

### Quais os requisitos necess√°rios para aprender React
 <ul style={{ textAlign: 'left' }}>
  <li>Webpack</li>
  <li>Babel</li>
  <li>HTML5</li>
  <li>CSS3</li>
  <li>JS</li>
</ul>

---

<List title="Principais conceitos"
  items={[
    'JSX',
    'Props',
    'State',
    'Apenas JavaScript'
  ]} 
/>

---

### Styles

---

<CodeSurfer
  title="ButtonSwitch"
  theme={nightOwl}
  code={require("!raw-loader!./components/ButtonSwitch.jsx")}
  showNumbers={true}
  steps={[
    { lines: [6] },
    { range: [18, 27], notes: 'this.handleClick' },
    { range: [12, 27] },
    { lines: [8, 9] },
    { range: [1, 27] }
  ]}
/>

---

### Entendendo a estrutura de um projeto React

---

### Escrevendo seu primeiro aplicativo em React

---

### Listas - Um pouquinho de JavaScript

```javascript
const meses = [
  { shortName: 'Jan', fullName: 'Janeiro', indice: 0 },
  { shortName: 'Fev', fullName: 'Fevereiro', indice: 1 },
  { shortName: 'Mar', fullName: 'Mar√ßo', indice: 2 }
];

const fullNames = meses.map(function(mes) {
  return mes.fullName;
});

console.log(fullNames); // ['Janeiro', 'Fevereiro', 'Mar√ßo']
```

---

### Desafio

---

## Hello World

```jsx
ReactDOM.render(
  <h1>Hello, world!</h1>, 
  document.getElementById('root')
);
```

```notes
- N√£o √© HTML nem Javascript
```
---
## [JSX](https://babeljs.io/repl/#?babili=false&browsers=&build=&builtIns=false&spec=false&loose=false&code_lz=JYWwDg9gTgLgBAJQKYEMDG8BmUIjgcilQ3wG4AoctCAOwGd4kAbJEJGmCOAXjgB4AFgEYAfAAlmTCABo4Ad2hMAJgEI-AemEjSQA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=true&fileSize=true&timeTravel=false&sourceType=module&lineWrap=true&presets=es2016%2Creact%2Cstage-3&prettier=false&targets=&version=6.26.0&envVersion=)

```jsx
const elemento = <h1>Hello, world!</h1>;
```

```notes
- Se estiv√©ssemos em 2013, 14, 15 eu teria que convencer voc√™s
- Um dos diferenciais do React
- D√° pra usar Vue com JSX
```

---

#### Express√µes em JSX (template interpolation)

```jsx
const name = 'Gabriel';
const element = <h1>Hello, {name}</h1>;

ReactDOM.render(
  element,
  document.getElementById('root')
);
```

---

#### Qualquer express√£o JS √© v√°lida

```jsx
const user = { nome: 'Gabriel', sobrenome: 'Tib√∫rcio' };

const formatName = ({ nome, sobrenome }) => `${nome} ${sobrenome}`;

const element = <h1>Hello, {formatName(user)}!</h1>;

ReactDOM.render(
  element,
  document.getElementById('root')
);
```
---
#### JSX tamb√©m √© uma express√£o

```jsx
function getGreeting(user) {
  if (user) {
    return <h1>Hello, {formatName(user)}!</h1>;
  }
  return <h1>Hello, Stranger.</h1>;
}
```

```notes
Podemos:
- Usar em if e for
- Atribuir a vari√°veis
- Aceitar como argumento
- Retornar de fun√ß√µes
```
---

#### JSX className e camelCase para atributos

```jsx
const element = <img className="img-responsive" src={user.avatarUrl} />;
```

```jsx
const btnClass = bg === primary ? 'bg-primary' : 'bg-secondary';
const element = <button className={`btn ${btnClass}`}>Button</button>;
```
---
#### JSX √© seguro

```jsx
const title = response.inputMalicioso;

// Seguro
const element = <h1>{title}</h1>;
```

```notes
- Escapa quaisquer valores antes de renderizar
```
---
```jsx
function renderizarHtml() {
  return { __html: '<p>Texto</p>' };
}

function Componente() {
  return <div dangerouslySetInnerHTML={renderizarHtml()} />;
}
```

```notes
- Renderizar HTML fica vulner√°vel a cross-site-scripting XSS
- Precisa digitar o met√≥do e passar um objeto para lembrar que √© perigoso
```
---
### Componentes 

* Fun√ß√µes idempotentes, puras, unit√°rias.
* √â poss√≠vel descrever a UI em qualquer momento no tempo, da mesma forma que uma aplica√ß√£o renderizada no servidor
---
## Componentes e Props

```jsx
class Welcome extends React.Component {
  render() {
    return <h1>Hello, {this.props.name}</h1>;
  }
}

const element = <Welcome name="Gabriel" />;
```

```notes
H√° 2 tipos de propriedades nos componentes: props e state
props: durante o ciclo de vida do componente, n√£o mudam
```
---
### Componentes funcionais (n√£o possuem estado)

```jsx
function Welcome(props) {
  return <h1>Hello, {props.name}</h1>;
}
```
---
### Uma aplica√ß√£o React

```jsx
class App extends React.Component {
  render() {
    return (
      <div className="container-fluid">
        <NavBar />
        <SideBar />

        <div className="row">
          <MeuComponente />
        </div>
      </div>
    );
  }
}

ReactDOM.render(<App />, document.getElementById('root'));
```

```notes
Estrutura base de uma p√°gina em React
```

---
## State

```notes
- Propriedades que mudam dentro do componente
- Estado interno
```
---
<List title="setState"
  items={[
    'Custa caro renderizar o DOM todo',
    'Virtual DOM'
  ]}
/>
---
<List title="setState"
  items={[
    'React constr√≥i uma nova sub-√°rvore da virtual DOM',
    'Compara com a virtual DOM antiga',
    'Computa a m√≠nima quantidade de muta√ß√µes no DOM e as coloca em uma fila',
    'Executa em batch todas as mudan√ßas'
  ]}
/>
---
<CodeSurfer
  title="Clock"
  theme={nightOwl}
  code={require("!raw-loader!./snippets/react/components/clock-example.jsx")}
  showNumbers={true}
  steps={[
    { range: [2, 5], notes: 'Definimos o estado inicial' },
    { range: [24, 31] },
    { range: [18, 22], notes: 'setState √© como modificamos o estado' },
    { range: [7, 12] },
    { range: [14, 16] },
    { range: [34, 37] },
    { range: [1, 37] }
  ]}
/>

```notes
- setState √© como dizemos ao react que queremos modificar o estado do componente
- componentDidMount √© onde fazemos requisi√ß√µes
- renderizamos apenas uma vez
```
---
<List title="Apenas javascript"
  items={[
    'Como declarar um componente?',
    'Como criar uma lista de componentes?',
    'Como fazer uma requisi√ß√£o?',
    'Em nenhum momento a gente olha para a DOM e procura onde devemos atualizar'
  ]}
/>

```notes
- fetch, axios, jQuery
- Requisi√ß√£o: precisamos saber apenas aonde colocar
```
---
## Eventos

```jsx
<button onclick="ativar()">
  Ativar
</button>

<button onClick={this.ativar}>
  Ativar
</button>
```

```notes
- camelCase
- fun√ß√µes != strings
- Erro comum, chamar a fun√ß√£o
```
---
## ButtonSwitch

import ButtonSwitch from './components/ButtonSwitch.jsx';

<ButtonSwitch />
---
<CodeSurfer
  title="ButtonSwitch"
  theme={nightOwl}
  code={require("!raw-loader!./components/ButtonSwitch.jsx")}
  showNumbers={true}
  steps={[
    { lines: [6] },
    { range: [18, 27], notes: 'this.handleClick' },
    { range: [12, 27] },
    { lines: [8, 9] },
    { range: [1, 27] }
  ]}
/>

```notes
- 2 coisas, valor de this e setState
- Cuidado com this em callbacks JSX
- O this dentro de m√©todos de classe n√£o se refere a classe, portanto o this ser√° undefined dentro do m√©todo handleClick.
```
---
```jsx
<button onClick={() => this.handleClick()} className={`btn btn-block ${btnClass}`}>
  {this.state.on ? 'On' : 'Off'}
</button>
```
---
```jsx
handleClick = () => {
  // this.state.on
  this.setState(state => {
    return { on: !state.on }
  });
}
```
---
import { Button } from 'reactstrap';
import ExemploModal from './components/ExemploModal.jsx';

### Modal
<ExemploModal buttonLabel="Abrir modal" />

```javascript
$('#modal').modal();
```
---
<CodeSurfer
  title="Modal"
  theme={nightOwl}
  code={require("!raw-loader!./components/ExemploModal.jsx")}
  showNumbers={true}
  steps={[
    { range: [5, 16] },
    { range: [18, 34] }
  ]}
/>

```notes
Exemplo de mudan√ßa de pensamento de c√≥digo imperativo para declarativo
```
---
## Listas

```jsx
function Lista(props) {
  const listaItens = props.itens.map(item => (
    <li>{item}</li>
  );
  return (
    <ul>{item}</ul>
  );
}

<Lista numeros={['Item 1', 'Item 2', 'Item 3', 'Item 4']} />
```

```notes
- Warning √© necess√°rio uma key para itens de uma lista
```
---
## Listas

```jsx
function Lista(props) {
  const listaItens = props.itens.map(item => (
    <li key={item}>{item}</li>
  );
  return (
    <ul>{item}</ul>
  );
}

<Lista numeros={['Item 1', 'Item 2', 'Item 3', 'Item 4']} />
```
---
## Listas

```jsx
function Lista(props) {
  const listaItens = props.itens.map((item, indice) => (
    <li key={indice}>{item}</li>
  );
  return (
    <ul>{item}</ul>
  );
}

<Lista numeros={['Item 1', 'Item 1', 'Item 1', 'Item 1']} />
```

```notes
- O React iria reclamar se fossem usadas keys iguais
```
---
# Formul√°rios

```notes
- N√£o √© dif√≠cil, mas ainda √© burocr√°tico
- Funciona um pouco diferente porque elementos de formul√°rio possuem um estado pr√≥prio
```
---
<CodeSurfer
  title="Formul√°rio"
  theme={nightOwl}
  code={require("!raw-loader!./components/NameForm.jsx")}
  showNumbers={true}
  steps={[
    { range: [19, 30] },
    { range: [10, 12] },
    { range: [1, 31] },
  ]}
/>

```notes
- Entender um componente, come√ßar pela fun√ß√£o render
- Componentes controlados - valor do input no state
- Evento normal do HTML
```
---
## Select

```html
<select>
  <option value="maca">Ma√ß√£</option>
  <option value="laranja">Laranja</option>
  <option selected value="uva">Uva</option>
  <option value="limao">Lim√£o</option>
</select>
``` 

```notes
- Forma de selecionar uma op√ß√£o no HTML
```
---
## Select

```jsx
<form onSubmit={this.handleSubmit}>
  <label>
    Selecione sua fruta favorita
    <select value={this.state.value} onChange={this.handleChange}>
      <option value="maca">Ma√ß√£</option>
      <option value="laranja">Laranja</option>
      <option value="uva">Uva</option>
      <option value="limao">Lim√£o</option>
    </select>
  </label>
  <input type="submit" value="Submit" />
</form>
``` 

```notes
- React usa uma propriedade value no select
- Isso faz com que o select funcione parecido com o input
```
---
## Formul√°rios

```javascript
this.state = { nome: '', sobrenome: '', linguagemFavorita: '' };

handleChangeNome(event) {
  this.setState({ nome: event.target.value });
}

handleChangeSobrenome(event) {
  this.setState({ sobrenome: event.target.value });
}

handleChangeLinguagemFavorita(event) {
  this.setState({ linguagemFavorita: event.target.value });
}
```
---
## Formul√°rios

```javascript
this.state = { nome: '', sobrenome: '', linguagemFavorita: '' };

handleChange(event) {
  const target = event.target;
  const { name, value } = target;
  this.setState({ 
    [name]: value
  });
}
```

```notes
- Usamos propriedades computadas do ES6
- A propriedade se torna din√¢mica
```
---
import Forms from './components/Forms.jsx';

<Forms />
---




# Pausa




---
# Create React App
---
```bash
npx create-react-app my-app
cd my-app
npm start
```
---
## Dia 2

* curiosidades
* imports, exports e bundlers
* state
* pr√°tica
* renderProps
* React Router

---
## Curiosidades

* [mdx-deck](https://github.com/jxnblk/mdx-deck)
* [https://github.com/tibuurcio/react-imd-2018](https://github.com/tibuurcio/react-imd-2018)
* [Prettier](https://prettier.io/)
* [now.sh](http://now.sh/)

```notes
now faz parte de um conjunto de sites (Netlify, Heroku) para deploy de aplica√ß√µes
Hyper, Next.js
```
---
## default export

```javascript
const add = (a, b) => a + b;
const sub = (a, b) => a - b;

const math = {
  add: add,
  sub: sub
};

export math;

// Em outro arquivo
import math from './math.js';
import meuNomePreferido from './math.js';

math.add(1, 2); // 3
meuNomePreferido.add(1, 2); // 3
```
---
## named export

```javascript
const add = (a, b) => a + b;
const sub = (a, b) => a - b;

export { add, sub };

// Em outro arquivo
import { add, sub } from './math.js';

add(1, 2); // 3
sub(1, 2); // -1
```
---
## React

```jsx
import React, { Component } from 'react';

export default class Button extends Component {
  render() {
    return (
      <button className="btn btn-default">Bot√£o</button>
    );
  }
}

// Em outro arquivo
import Button from './Button';
```
---
## React

```jsx
import React, { Component } from 'react';

const Button = () => <button className="btn btn-default">button</button>;
const Div = () => <div className="div-customizada">div</div>;

export { Button, Div };

// Em outro arquivo
import { Button, Div } from './Button';
```
---
## reactstrap

```jsx
import React from 'react';
import { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';
```

```notes
Na pr√°tica
```
---
## Webpack
<Appear>
  <p>Bundler de arquivos est√°ticos para aplica√ß√µes em javascript modernas</p>
  <p>Outros: Browserify, Rollup, Parcel</p>
</Appear>

```notes
N√£o √© poss√≠vel usar imports no browser ainda
Algu√©m conhece algum deles?
```
---
<Image src={require("file-loader!./imgs/webpack.png")} size="80%" />

```notes
E bundlers em geral
```
---
```html
<!doctype html>
<html>
  <head>
    <title>Getting Started</title>
    <script src="https://unpkg.com/lodash@4.16.6"></script>
  </head>
  <body>
    <script src="./src/main.js"></script>
  </body>
</html>
```

```notes
Inclui lodash via script
```
---
src/main.js
```javascript
function component() {
  let element = document.createElement('div');

  // Precisa-se do lodash inclu√≠do na p√°gina para essa linha funcionar
  element.innerHTML = _.join(['Hello', 'webpack'], ' ');

  return element;
}

document.body.appendChild(component());
```

```notes
Depend√™ncias impl√≠citas entre a tag script que importa o lodash e o c√≥digo em index.js

- N√£o √© aparente que o script depende de uma biblioteca
- Se a depend√™ncia estiver faltando ou for inclu√≠da na ordem errada, n√£o vai funcionar
- O browser precisa fazer o download de depend√™ncias desnecess√°rias
```
---
```javascript
import _ from 'lodash';

function component() {
  let element = document.createElement('div');

  // Precisa-se do lodash inclu√≠do na p√°gina para essa linha funcionar
  element.innerHTML = _.join(['Hello', 'webpack'], ' ');

  return element;
}

document.body.appendChild(component());
```

```html
<script src="./dist/main.js"></script>
```
---
Em conjunto com o Babel, webpack se torna uma ferramenta importante

```notes
Implementam especifica√ß√µes antes de serem aprovadas, preset-{0, 3}
```
---
Create React App j√° configura tudo pra gente üëè
---
import codeComparisonLayout from './layouts/code-comparison';

export default codeComparisonLayout

setState

```jsx
this.setState({
  button: true
});
```

```jsx
this.setState(state => {
  button: !state.button
});
```
---
export default codeComparisonLayout

callback

```jsx
this.setState({ 
  button: true 
}, () => console.log(this.state));
```

```jsx
this.setState(state => {
  button: !state.button
}, () => console.log(this.state));
```
---
import ExemploSetState from './components/ExemploSetState.jsx';

<ExemploSetState fail={true}/>
---
<CodeSurfer
  title="setState"
  theme={nightOwl}
  code={require("!raw-loader!./examples/ExemploSetState.jsx")}
  showNumbers={true}
  steps={[
    { range: [6, 13] },
    { range: [26, 34] },
    { range: [15, 23] },
  ]}
/>

```notes
N√£o d√° certo por causa do shallow merge
```
---
Criando uma c√≥pia e substituindo a propriedade
```javascript
handleClick(name) {
  this.setState(state => {
    const novoState = Object.assign({}, state);
    novoState.buttons[name] = !state.buttons[name];
    return novoState;
  });
}
```
---
Utilizando operador de spread
```javascript
handleClick(name) {
  this.setState(state => {
    return {
      buttons: {
        ...state.buttons,
        [name]: !state.buttons[name]
      }
    };
  });
}
```
---
immutability-helper
```javascript
import update from 'immutability-helpers';

handleClick(name) {
  this.setState(state => {
    return update(state, {
      buttons: {
        [name]: {
          $set: !state.buttons[name]
        }
      }
    };
  });
}
```
---
```javascript
update(state, {
  outra: {
    propriedade: {
      nested: {
        $set: { valor: 3 }
      }
    }
  }
})
```
---
<ExemploSetState fail={false}/>

```notes
Funciona com qualquer uma das alternativas anteriores
```
---
```javascript
this.state = {
  buttons: [],
  divs: {},
  inputs: {},
  keys: {}
}

this.setState({
  buttons: {},
  keys: {}
});
```

---

Pr√°tica

[Documenta√ß√£o CRA](https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/template/README.md)

<ul style={{ textAlign: 'left' }}>
<Appear>
  <li>Instalando depend√™ncias</li>
  <li>Adicionando CSS, imagens, fontes e arquivos</li>
  <li>Adicionando Bootstrap</li>
  <li>Adicionando Router</li>
  <li>Testes (Jest)</li>
  <li>Progressive Web Application</li>
  <li>Deploy (Now, Firebase, Netlify, Heroku, Github pages, Azure)</li>
</Appear>
</ul>

## Pr√≥ximos passos

* [React Docs](https://reactjs.org/docs/)
* [React Docs - Advanced Guides](https://reactjs.org/docs/)
* [unstated](https://github.com/jamiebuilds/unstated)
* [Integrando CRA com Typescript](https://github.com/Microsoft/TypeScript-React-Starter)
* [Next.js](https://nextjs.org/) - Renderiza√ß√£o no servidor com React
* [Gatsby](https://www.gatsbyjs.org/) - Gerador de sites est√°ticos (blog, documenta√ß√£o)
